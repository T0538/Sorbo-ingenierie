<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Chargement Progressif | Sorbo-Ingénierie</title>
    <link rel="icon" type="image/png" href="images/logo.mr.png">
    <link rel="shortcut icon" type="image/png" href="images/logo.mr.png">
    <link rel="apple-touch-icon" href="images/logo.mr.png">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/logo-fixes.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    

    <style>
        .test-section {
            padding: 80px 0;
            min-height: 100vh;
        }
        
        .test-card {
            background: white;
            padding: 40px;
            margin: 20px 0;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .test-image {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            margin: 20px auto;
            display: block;
        }
        
        .performance-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(209, 0, 0, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Informations de performance -->
    <div class="performance-info">
        <div id="performance-status">🔄 Chargement...</div>
        <div id="animations-count">Animations: 0</div>
        <div id="images-loaded">Images: 0/0</div>
    </div>

    <header>
        <div class="container">
            <div class="logo">
                <a href="index.html">
                    <img src="images/logo.mr.png" alt="Logo Sorbo-Ingénierie" id="logo">
                </a>
            </div>
            <nav aria-label="Navigation principale">
                <ul class="main-nav">
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="notre-entreprise.html">Notre entreprise</a></li>
                    <li><a href="ingenierie.html">Ingénierie</a></li>
                    <li><a href="nos-formations.html">Nos formations</a></li>
                    <li><a href="nos-logiciels.html">Nos logiciels</a></li>
                    <li><a href="nous-rejoindre.html">Nous rejoindre</a></li>
                    <li><a href="contact.html">Contactez-nous</a></li>
                    <li><a href="test-lazy-loading.html" class="active">Test</a></li>
                </ul>
                <button class="mobile-menu-btn" aria-label="Menu mobile" aria-expanded="false">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
            </nav>
        </div>
    </header>

    <section class="page-header">
        <div class="container">
            <h1>Test du Chargement Progressif</h1>
            <p>Cette page teste les animations et le chargement différé des éléments</p>
        </div>
    </section>

    <section class="test-section">
        <div class="container">
            <h2>Section 1 - Cartes avec animations</h2>
            
            <div class="test-card">
                <h3>Animation fade-up</h3>
                <p>Cette carte devrait apparaître avec une animation fade-up</p>
                <img src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Test image 1" class="test-image">
            </div>
            
            <div class="test-card">
                <h3>Animation fade-left</h3>
                <p>Cette carte devrait apparaître avec une animation fade-left</p>
                <img src="https://images.unsplash.com/photo-1542744094-3a31f272c490?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Test image 2" class="test-image">
            </div>
            
            <div class="test-card">
                <h3>Animation zoom-in</h3>
                <p>Cette carte devrait apparaître avec une animation zoom-in</p>
                <img src="https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Test image 3" class="test-image">
            </div>
        </div>
    </section>

    <section class="test-section" style="background-color: #f8f9fa;">
        <div class="container">
            <h2>Section 2 - Éléments multiples</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="test-card">
                    <i class="fas fa-rocket" style="font-size: 3rem; color: #d10000; margin-bottom: 20px;"></i>
                    <h4>Performance</h4>
                    <p>Test des performances de chargement</p>
                </div>
                
                <div class="test-card">
                    <i class="fas fa-eye" style="font-size: 3rem; color: #d10000; margin-bottom: 20px;"></i>
                    <h4>Visibilité</h4>
                    <p>Test de la détection de visibilité</p>
                </div>
                
                <div class="test-card">
                    <i class="fas fa-mobile-alt" style="font-size: 3rem; color: #d10000; margin-bottom: 20px;"></i>
                    <h4>Responsive</h4>
                    <p>Test de l'adaptation mobile</p>
                </div>
            </div>
        </div>
    </section>

    <section class="test-section">
        <div class="container">
            <h2>Section 3 - Images en série</h2>
            <p>Test du chargement différé des images</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 40px;">
                <img src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Image test 4" class="test-image">
                <img src="https://images.unsplash.com/photo-1586717799252-bd134ad00e26?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Image test 5" class="test-image">
                <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Image test 6" class="test-image">
                <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Image test 7" class="test-image">
            </div>
        </div>
    </section>

    <footer style="background-color: var(--primary-color); color: white; text-align: center; padding: 40px 0;">
        <div class="container">
            <h3>Test terminé</h3>
            <p>Si vous voyez ce message avec des animations fluides, le système fonctionne parfaitement !</p>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="js/environment-config.js"></script>
    <script src="js/script.js"></script>
    <script src="js/lazy-loading.js"></script>
    <script src="js/performance-optimizer.js"></script>
    
    <script>
        // Script de test pour afficher les informations de performance
        document.addEventListener('DOMContentLoaded', function() {
            const performanceStatus = document.getElementById('performance-status');
            const animationsCount = document.getElementById('animations-count');
            const imagesLoaded = document.getElementById('images-loaded');
            
            // Compter les éléments animés
            const animatedElements = document.querySelectorAll('[data-aos]');
            animationsCount.textContent = `Animations: ${animatedElements.length}`;
            
            // Compter les images
            const images = document.querySelectorAll('img');
            let loadedImages = 0;
            
            function updateImageCount() {
                imagesLoaded.textContent = `Images: ${loadedImages}/${images.length}`;
                if (loadedImages === images.length) {
                    performanceStatus.textContent = '✅ Tout chargé';
                    performanceStatus.style.backgroundColor = '#28a745';
                }
            }
            
            images.forEach(img => {
                if (img.complete) {
                    loadedImages++;
                } else {
                    img.addEventListener('load', () => {
                        loadedImages++;
                        updateImageCount();
                    });
                }
            });
            
            updateImageCount();
            
            // Surveiller les animations AOS
            if (typeof AOS !== 'undefined') {
                performanceStatus.textContent = '🎨 AOS actif';
                
                // Observer les animations
                const observer = new MutationObserver((mutations) => {
                    mutations.forEach((mutation) => {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            const target = mutation.target;
                            if (target.classList.contains('aos-animate')) {
                                console.log('Animation déclenchée:', target);
                            }
                        }
                    });
                });
                
                animatedElements.forEach(el => {
                    observer.observe(el, { attributes: true });
                });
            }
            
            // Performance timing
            window.addEventListener('load', () => {
                const perfData = performance.getEntriesByType('navigation')[0];
                console.log('📊 Performance:', {
                    'Temps de chargement total': Math.round(perfData.loadEventEnd - perfData.fetchStart) + 'ms',
                    'DOM Content Loaded': Math.round(perfData.domContentLoadedEventEnd - perfData.fetchStart) + 'ms',
                    'First Paint': Math.round(performance.getEntriesByType('paint')[0]?.startTime) + 'ms'
                });
            });
        });
    </script>
</body>
</html>

