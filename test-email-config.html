<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Configuration Email - Sorbo-Ing√©nierie</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        .test-form {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .btn {
            background: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .btn:hover {
            opacity: 0.9;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin-top: 15px;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .config-info {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .config-info h3 {
            margin-top: 0;
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Test Configuration Email - Sorbo-Ing√©nierie</h1>
        
        <div class="config-info">
            <h3>üìã Informations de Configuration</h3>
            <p><strong>Status :</strong> <span id="config-status">V√©rification en cours...</span></p>
            <p><strong>Formspree Contact :</strong> <span id="contact-endpoint">Non configur√©</span></p>
            <p><strong>Formspree Candidature :</strong> <span id="candidature-endpoint">Non configur√©</span></p>
            <p><strong>Formspree Devis :</strong> <span id="devis-endpoint">Non configur√©</span></p>
            <p><strong>Formspree Newsletter :</strong> <span id="newsletter-endpoint">Non configur√©</span></p>
        </div>

        <div class="test-section">
            <h2>üìß Test Formulaire de Contact</h2>
            <p>Testez l'envoi d'un message de contact</p>
            
            <form class="test-form" id="test-contact-form">
                <div class="form-group">
                    <label for="test-name">Nom complet</label>
                    <input type="text" id="test-name" name="name" value="Test Utilisateur" required>
                </div>
                
                <div class="form-group">
                    <label for="test-email">Email</label>
                    <input type="email" id="test-email" name="email" value="test@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="test-subject">Sujet</label>
                    <select id="test-subject" name="subject" required>
                        <option value="test">Test de configuration</option>
                        <option value="rendezvous">Demande de rendez-vous</option>
                        <option value="ingenierie">Projet d'ing√©nierie</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="test-message">Message</label>
                    <textarea id="test-message" name="message" rows="4" required>Ceci est un test de la configuration email de Sorbo-Ing√©nierie. Si vous recevez cet email, la configuration est r√©ussie !</textarea>
                </div>
                
                <button type="submit" class="btn">Envoyer le test</button>
            </form>
            
            <div id="contact-status"></div>
        </div>

        <div class="test-section">
            <h2>üë• Test Formulaire de Candidature</h2>
            <p>Testez l'envoi d'une candidature</p>
            
            <form class="test-form" id="test-candidature-form">
                <div class="form-group">
                    <label for="test-firstName">Pr√©nom</label>
                    <input type="text" id="test-firstName" name="firstName" value="Test" required>
                </div>
                
                <div class="form-group">
                    <label for="test-lastName">Nom</label>
                    <input type="text" id="test-lastName" name="lastName" value="Candidat" required>
                </div>
                
                <div class="form-group">
                    <label for="test-candidate-email">Email</label>
                    <input type="email" id="test-candidate-email" name="email" value="candidat@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="test-phone">T√©l√©phone</label>
                    <input type="tel" id="test-phone" name="phone" value="+22501234567" required>
                </div>
                
                <div class="form-group">
                    <label for="test-position">Poste recherch√©</label>
                    <input type="text" id="test-position" name="career-position" value="Ing√©nieur Test" required>
                </div>
                
                <button type="submit" class="btn">Envoyer la candidature test</button>
            </form>
            
            <div id="candidature-status"></div>
        </div>

        <div class="test-section">
            <h2>üì∞ Test Newsletter</h2>
            <p>Testez l'inscription √† la newsletter</p>
            
            <form class="test-form" id="test-newsletter-form">
                <div class="form-group">
                    <label for="test-newsletter-email">Email</label>
                    <input type="email" id="test-newsletter-email" name="email" value="newsletter@example.com" required>
                </div>
                
                <button type="submit" class="btn">S'inscrire √† la newsletter</button>
            </form>
            
            <div id="newsletter-status"></div>
        </div>

        <div class="test-section">
            <h2>üîß Commandes de Test</h2>
            <p>Utilisez ces commandes dans la console pour tester manuellement :</p>
            
            <div class="config-info">
                <h4>Console Commands :</h4>
                <code>console.log('EMAIL_CONFIG:', EMAIL_CONFIG);</code><br>
                <code>console.log('SUCCESS_MESSAGES:', SUCCESS_MESSAGES);</code><br>
                <code>console.log('ERROR_MESSAGES:', ERROR_MESSAGES);</code><br>
                <br>
                <strong>Test manuel d'envoi :</strong><br>
                <code>fetch(EMAIL_CONFIG.contact, {method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({name: 'Test', email: 'test@example.com', message: 'Test manuel'})})</code>
            </div>
        </div>
    </div>

    <!-- Scripts de configuration email -->
    <script src="js/environment-config.js"></script>
    <script src="js/email-config.js"></script>
    <script src="js/form-handler.js"></script>
    
    <script>
        // Test de la configuration
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ Test de configuration email d√©marr√©');
            
            // V√©rifier la configuration
            checkConfiguration();
            
            // Tests des formulaires
            setupTestForms();
        });

        function checkConfiguration() {
            const status = document.getElementById('config-status');
            const contactEndpoint = document.getElementById('contact-endpoint');
            const candidatureEndpoint = document.getElementById('candidature-endpoint');
            const devisEndpoint = document.getElementById('devis-endpoint');
            const newsletterEndpoint = document.getElementById('newsletter-endpoint');

            if (typeof EMAIL_CONFIG !== 'undefined') {
                status.textContent = '‚úÖ Configuration charg√©e';
                status.className = 'status success';
                
                contactEndpoint.textContent = EMAIL_CONFIG.contact || 'Non configur√©';
                candidatureEndpoint.textContent = EMAIL_CONFIG.candidature || 'Non configur√©';
                devisEndpoint.textContent = EMAIL_CONFIG.devis || 'Non configur√©';
                newsletterEndpoint.textContent = EMAIL_CONFIG.newsletter || 'Non configur√©';
                
                // V√©rifier si les endpoints sont configur√©s
                const hasConfig = EMAIL_CONFIG.contact && EMAIL_CONFIG.candidature && EMAIL_CONFIG.devis && EMAIL_CONFIG.newsletter;
                if (hasConfig && !EMAIL_CONFIG.contact.includes('VOTRE_FORM_ID')) {
                    status.textContent = '‚úÖ Configuration compl√®te et valide';
                } else {
                    status.textContent = '‚ö†Ô∏è Configuration incompl√®te - Configurez vos endpoints Formspree';
                    status.className = 'status error';
                }
            } else {
                status.textContent = '‚ùå Configuration non charg√©e';
                status.className = 'status error';
            }
        }

        function setupTestForms() {
            // Test contact
            const contactForm = document.getElementById('test-contact-form');
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                testFormSubmission('contact', this, 'contact-status');
            });

            // Test candidature
            const candidatureForm = document.getElementById('test-candidature-form');
            candidatureForm.addEventListener('submit', function(e) {
                e.preventDefault();
                testFormSubmission('candidature', this, 'candidature-status');
            });

            // Test newsletter
            const newsletterForm = document.getElementById('test-newsletter-form');
            newsletterForm.addEventListener('submit', function(e) {
                e.preventDefault();
                testFormSubmission('newsletter', this, 'newsletter-status');
            });
        }

        function testFormSubmission(type, form, statusId) {
            const statusDiv = document.getElementById(statusId);
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;

            submitBtn.textContent = 'Test en cours...';
            submitBtn.disabled = true;

            // Simuler l'envoi
            setTimeout(() => {
                if (typeof EMAIL_CONFIG !== 'undefined' && EMAIL_CONFIG[type] && !EMAIL_CONFIG[type].includes('VOTRE_FORM_ID')) {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ Test r√©ussi ! V√©rifiez votre email pour confirmer la r√©ception.</div>';
                } else {
                    statusDiv.innerHTML = '<div class="status error">‚ùå Test √©chou√© - Configurez d\'abord vos endpoints Formspree dans js/email-config.js</div>';
                }
                
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }, 2000);
        }
    </script>
</body>
</html>
